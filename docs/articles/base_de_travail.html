<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="impactR"><title>Base de travail avec impactR ‚Ä¢ impactR</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Base de travail avec impactR"><meta property="og:description" content="impactR"><meta property="og:image" content="https://gnoblet.github.io/impactR/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">impactR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.8.7.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/base_de_travail.html">Base de travail avec impactR</a>
    <a class="dropdown-item" href="../articles/cleaning_data.html">Cleaning data</a>
    <a class="dropdown-item" href="../articles/main_workflow.html">Some workflow</a>
    <a class="dropdown-item" href="../articles/nettoyage_de_donnees.html">Nettoyage de donn√©es</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/gnoblet/impactR/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Base de travail avec impactR</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/gnoblet/impactR/blob/HEAD/vignettes/base_de_travail.Rmd" class="external-link"><code>vignettes/base_de_travail.Rmd</code></a></small>
      <div class="d-none name"><code>base_de_travail.Rmd</code></div>
    </div>

    
    
<div id="pourquoi" class="section level1">
<h1>Pourquoi ?</h1>
<p>Cette vignette a pour but d‚Äôexpliciter l‚Äôusage d‚Äô<code>impactR</code>
et la mani√®re dont il est possible de l‚Äôutiliser dans le cadre d‚Äôun
suivi de collecte de donn√©es et du nettoyage. Commen√ßons par charger le
package.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Si vous n&#39;avez pas encore install√© le package</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># devtools::install_github(&quot;impactR)</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(impactR)</span></code></pre></div>
<p>Ci-dessus, on peut charger des donn√©es exemple collect√©es.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load dataset in environment</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(data)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Show the first lines and types of airports&#39; tibble</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> tibble<span class="sc">::</span><span class="fu">as_tibble</span>()</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>data</span></code></pre></div>
<pre><code>## Warning in as.POSIXlt.POSIXct(x, tz): unable to identify current timezone &#39;H&#39;:
## please set environment variable &#39;TZ&#39;</code></pre>
<pre><code>## [38;5;246m# A tibble: 8 √ó 50[39m
##   uuid  start               end                 today               deviceid    
##   [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;dttm&gt;[39m[23m              [3m[38;5;246m&lt;dttm&gt;[39m[23m              [3m[38;5;246m&lt;dttm&gt;[39m[23m              [3m[38;5;246m&lt;chr&gt;[39m[23m       
## [38;5;250m1[39m x1    2021-10-18 [38;5;246m09:08:24[39m 2021-10-18 [38;5;246m10:01:35[39m 2021-10-18 [38;5;246m00:00:00[39m collect:tgN‚Ä¶
## [38;5;250m2[39m x2    2021-10-20 [38;5;246m09:14:47[39m 2021-10-20 [38;5;246m10:05:22[39m 2021-10-20 [38;5;246m00:00:00[39m 35557110048‚Ä¶
## [38;5;250m3[39m x3    2021-10-20 [38;5;246m10:11:14[39m 2021-10-20 [38;5;246m11:00:07[39m 2021-10-20 [38;5;246m00:00:00[39m 35557110048‚Ä¶
## [38;5;250m4[39m x4    2021-10-20 [38;5;246m11:12:05[39m 2021-10-20 [38;5;246m12:02:57[39m 2021-10-20 [38;5;246m00:00:00[39m 35557110048‚Ä¶
## [38;5;250m5[39m x5    2021-10-20 [38;5;246m14:14:36[39m 2021-10-20 [38;5;246m15:02:31[39m 2021-10-20 [38;5;246m00:00:00[39m 35557110048‚Ä¶
## [38;5;250m6[39m x6    2021-10-20 [38;5;246m15:09:11[39m 2021-10-20 [38;5;246m16:04:35[39m 2021-10-20 [38;5;246m00:00:00[39m 35557110048‚Ä¶
## [38;5;250m7[39m x7    2021-10-20 [38;5;246m09:44:15[39m 2021-10-20 [38;5;246m10:26:34[39m 2021-10-20 [38;5;246m00:00:00[39m 35557110050‚Ä¶
## [38;5;250m8[39m x8    2021-10-20 [38;5;246m10:31:55[39m 2021-10-20 [38;5;246m11:12:48[39m 2021-10-20 [38;5;246m00:00:00[39m 35557110050‚Ä¶
## [38;5;246m# ‚Ä¶ with 45 more variables: i_enum_id &lt;dbl&gt;, i_enum_genre &lt;chr&gt;,[39m
## [38;5;246m#   i_admin2 &lt;chr&gt;, i_ville &lt;chr&gt;, i_secteur &lt;chr&gt;, i_info_secteur &lt;chr&gt;,[39m
## [38;5;246m#   i_zad &lt;chr&gt;, i_zad_1 &lt;chr&gt;, i_consensus &lt;chr&gt;, i_consensus_note &lt;chr&gt;,[39m
## [38;5;246m#   i_enquete_age &lt;dbl&gt;, i_enquete_genre &lt;chr&gt;, i_statut &lt;chr&gt;,[39m
## [38;5;246m#   i_note_statut &lt;lgl&gt;, i_statut_1 &lt;chr&gt;, c_note &lt;lgl&gt;, c_chef_menage &lt;chr&gt;,[39m
## [38;5;246m#   c_n_chef_menage_genre &lt;chr&gt;, c_n_chef_menage_age &lt;dbl&gt;,[39m
## [38;5;246m#   c_chef_menage_age &lt;dbl&gt;, c_chef_menage_genre &lt;chr&gt;, ‚Ä¶[39m
## [38;5;246m# ‚Ñπ Use `colnames()` to see all variable names[39m</code></pre>
<p>La plupart des fonctions de <code>impactR</code> sont √©crites en
supposant que les donn√©es fournies peuvent √™tre converties en tibble,
puisqu‚Äôelles utilisent largement le tidyverse.</p>
<p>Supposons que nous ayons une feuille ‚Äòsurvey‚Äô compos√©e comme suit
:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(survey)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>survey <span class="ot">&lt;-</span> survey <span class="sc">|&gt;</span> tibble<span class="sc">::</span><span class="fu">as_tibble</span>(survey)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>survey</span></code></pre></div>
<pre><code>## [38;5;246m# A tibble: 44 √ó 12[39m
##    type        name  label hint  requi‚Ä¶¬π choic‚Ä¶¬≤ calcu‚Ä¶¬≥ relev‚Ä¶‚Å¥ const‚Ä¶‚Åµ const‚Ä¶‚Å∂
##    [3m[38;5;246m&lt;chr&gt;[39m[23m       [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;lgl&gt;[39m[23m [3m[38;5;246m&lt;lgl&gt;[39m[23m   [3m[38;5;246m&lt;chr&gt;[39m[23m   [3m[38;5;246m&lt;chr&gt;[39m[23m   [3m[38;5;246m&lt;chr&gt;[39m[23m   [3m[38;5;246m&lt;chr&gt;[39m[23m   [3m[38;5;246m&lt;chr&gt;[39m[23m  
## [38;5;250m 1[39m start       start [31mNA[39m    [31mNA[39m    [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m     
## [38;5;250m 2[39m end         end   [31mNA[39m    [31mNA[39m    [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m     
## [38;5;250m 3[39m today       today [31mNA[39m    [31mNA[39m    [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m     
## [38;5;250m 4[39m deviceid    devi‚Ä¶ [31mNA[39m    [31mNA[39m    [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m     
## [38;5;250m 5[39m select_one‚Ä¶ i_en‚Ä¶ Code‚Ä¶ [31mNA[39m    TRUE    [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m     
## [38;5;250m 6[39m select_one‚Ä¶ i_en‚Ä¶ Sexe‚Ä¶ [31mNA[39m    TRUE    [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m     
## [38;5;250m 7[39m hidden      i_ad‚Ä¶ Quel‚Ä¶ [31mNA[39m    FALSE   [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m     
## [38;5;250m 8[39m hidden      i_vi‚Ä¶ Quel‚Ä¶ [31mNA[39m    FALSE   [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m     
## [38;5;250m 9[39m select_one‚Ä¶ i_se‚Ä¶ Quel‚Ä¶ [31mNA[39m    TRUE    [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m     
## [38;5;250m10[39m calculate   i_in‚Ä¶ [31mNA[39m    [31mNA[39m    TRUE    [31mNA[39m      jr:cho‚Ä¶ [31mNA[39m      [31mNA[39m      [31mNA[39m     
## [38;5;246m# ‚Ä¶ with 34 more rows, 2 more variables: given_name &lt;lgl&gt;, default &lt;chr&gt;, and[39m
## [38;5;246m#   abbreviated variable names ¬π‚Äãrequired, ¬≤‚Äãchoice_filter, ¬≥‚Äãcalculation,[39m
## [38;5;246m#   ‚Å¥‚Äãrelevant, ‚Åµ‚Äãconstraint, ‚Å∂‚Äãconstraint_message[39m
## [38;5;246m# ‚Ñπ Use `print(n = ...)` to see more rows, and `colnames()` to see all variable names[39m</code></pre>
<p>La premi√®re chose √† faire avec l‚Äôobjet ‚Äòsurvey‚Äô, car il sera utilis√©
ailleurs : il faut s√©parer en deux la colonne ‚Äòtype‚Äô.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Mise√† part l&#39;argument &#39;col_to_split&#39; (la colonne √† s√©parer), les autres param√®tres sont les param√®tres par d√©faut</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>survey <span class="ot">&lt;-</span> survey <span class="sc">|&gt;</span>  </span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">split_survey</span>(</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_to_split =</span> <span class="st">&quot;type&quot;</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;type&quot;</span>, <span class="st">&quot;list_name&quot;</span>),</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">sep =</span> <span class="st">&quot; &quot;</span>,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">&quot;right&quot;</span>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>survey</span></code></pre></div>
<pre><code>## [38;5;246m# A tibble: 44 √ó 13[39m
##    type       list_n‚Ä¶¬π name  label hint  requi‚Ä¶¬≤ choic‚Ä¶¬≥ calcu‚Ä¶‚Å¥ relev‚Ä¶‚Åµ const‚Ä¶‚Å∂
##    [3m[38;5;246m&lt;chr&gt;[39m[23m      [3m[38;5;246m&lt;chr&gt;[39m[23m    [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;lgl&gt;[39m[23m [3m[38;5;246m&lt;lgl&gt;[39m[23m   [3m[38;5;246m&lt;chr&gt;[39m[23m   [3m[38;5;246m&lt;chr&gt;[39m[23m   [3m[38;5;246m&lt;chr&gt;[39m[23m   [3m[38;5;246m&lt;chr&gt;[39m[23m  
## [38;5;250m 1[39m start      [31mNA[39m       start [31mNA[39m    [31mNA[39m    [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m     
## [38;5;250m 2[39m end        [31mNA[39m       end   [31mNA[39m    [31mNA[39m    [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m     
## [38;5;250m 3[39m today      [31mNA[39m       today [31mNA[39m    [31mNA[39m    [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m     
## [38;5;250m 4[39m deviceid   [31mNA[39m       devi‚Ä¶ [31mNA[39m    [31mNA[39m    [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m     
## [38;5;250m 5[39m select_one l_enum_‚Ä¶ i_en‚Ä¶ Code‚Ä¶ [31mNA[39m    TRUE    [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m     
## [38;5;250m 6[39m select_one l_genre  i_en‚Ä¶ Sexe‚Ä¶ [31mNA[39m    TRUE    [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m     
## [38;5;250m 7[39m hidden     [31mNA[39m       i_ad‚Ä¶ Quel‚Ä¶ [31mNA[39m    FALSE   [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m     
## [38;5;250m 8[39m hidden     [31mNA[39m       i_vi‚Ä¶ Quel‚Ä¶ [31mNA[39m    FALSE   [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m     
## [38;5;250m 9[39m select_one l_secte‚Ä¶ i_se‚Ä¶ Quel‚Ä¶ [31mNA[39m    TRUE    [31mNA[39m      [31mNA[39m      [31mNA[39m      [31mNA[39m     
## [38;5;250m10[39m calculate  [31mNA[39m       i_in‚Ä¶ [31mNA[39m    [31mNA[39m    TRUE    [31mNA[39m      jr:cho‚Ä¶ [31mNA[39m      [31mNA[39m     
## [38;5;246m# ‚Ä¶ with 34 more rows, 3 more variables: constraint_message &lt;chr&gt;,[39m
## [38;5;246m#   given_name &lt;lgl&gt;, default &lt;chr&gt;, and abbreviated variable names ¬π‚Äãlist_name,[39m
## [38;5;246m#   ¬≤‚Äãrequired, ¬≥‚Äãchoice_filter, ‚Å¥‚Äãcalculation, ‚Åµ‚Äãrelevant, ‚Å∂‚Äãconstraint[39m
## [38;5;246m# ‚Ñπ Use `print(n = ...)` to see more rows, and `colnames()` to see all variable names[39m</code></pre>
</div>
<div id="contr√¥le-de-la-qualit√©-des-donn√©es" class="section level1">
<h1>Contr√¥le de la qualit√© des donn√©es</h1>
<div id="journal-de-nettoyage-des-valeurs-aberrantes"
class="section level2">
<h2>Journal de nettoyage des valeurs aberrantes</h2>
<p>Afin de pouvoir obtenir les valeurs dites aberrantes (pour les
variables num√©riques), vous pouvez utiliser la fonction
<code>make_log_outlier</code> qui permet d‚Äôobtenir deux types de valeurs
aberrantes : l‚Äô√©cart par rapport √† la moyenne en utilisant la fonction
<code>outliers_sd</code> et l‚Äô√©cart interquartile en utilisant la
fonction <code>outliers_iqr</code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Utilitaire pour obtenir toutes les variables num√©riques</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co">#numeric_cols(data) #  Obtenir toutes les colonnes num√©riques : cela inclut par exemple les identifiants num√©riques des √©num√©rateurs ou les points GPS.</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co">#numeric_cols(data, survey) # Obtenir toutes les colonnes num√©riques en utilisant la feuille &#39;survey&#39; de l&#39;outil Kobo (uniquement les calculate, integer, etc.)</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Valeurs aberrantes interquartle (r√®gle des 1,5 fois par d√©faut)</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">#outliers_iqr(data, col = i_enquete_age,times = 1.5,  id_col = uuid) # La colonne d&#39;identifiant &#39;id_col&#39; est habituellement &quot;uuid&quot; avec Kobo</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Valeurs aberrantes √† la moyenne</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co">#outliers_sd(data, i_enquete_age, times = 3, id_col = uuid)</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Fabriquer le journal de nettoyage entier pour toutes les variables num√©riques (en prenant en compte l&#39;outil Kobo)</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>log_outliers <span class="ot">&lt;-</span> <span class="fu">make_log_outlier</span>(data, survey, <span class="at">id_col =</span> uuid, today, i_enum_id, i_zad)</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>log_outliers</span></code></pre></div>
<pre><code>## [38;5;246m# A tibble: 4 √ó 16[39m
##   id_check today               i_enu‚Ä¶¬π i_zad uuid  quest‚Ä¶¬≤ quest‚Ä¶¬≥ why   feedb‚Ä¶‚Å¥
##   [3m[38;5;246m&lt;chr&gt;[39m[23m    [3m[38;5;246m&lt;dttm&gt;[39m[23m                [3m[38;5;246m&lt;dbl&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m   [3m[38;5;246m&lt;chr&gt;[39m[23m   [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m  
## [38;5;250m1[39m outlier  2021-10-20 [38;5;246m00:00:00[39m       3 wend‚Ä¶ x2    i_enqu‚Ä¶ Quel e‚Ä¶ Outl‚Ä¶ Fill in
## [38;5;250m2[39m outlier  2021-10-18 [38;5;246m00:00:00[39m       8 wend‚Ä¶ x1    c_n_ch‚Ä¶ Quel e‚Ä¶ Outl‚Ä¶ Fill in
## [38;5;250m3[39m outlier  2021-10-20 [38;5;246m00:00:00[39m       3 wend‚Ä¶ x2    c_n_ch‚Ä¶ Quel e‚Ä¶ Outl‚Ä¶ Fill in
## [38;5;250m4[39m outlier  2021-10-18 [38;5;246m00:00:00[39m       8 wend‚Ä¶ x1    c_chef‚Ä¶ Age ex‚Ä¶ Outl‚Ä¶ Fill in
## [38;5;246m# ‚Ä¶ with 7 more variables: action &lt;chr&gt;, old_value &lt;dbl&gt;, new_value &lt;chr&gt;,[39m
## [38;5;246m#   type &lt;chr&gt;, other_parent_question &lt;chr&gt;, other_new_value &lt;chr&gt;,[39m
## [38;5;246m#   checkdate &lt;chr&gt;, and abbreviated variable names ¬π‚Äãi_enum_id, ¬≤‚Äãquestion_name,[39m
## [38;5;246m#   ¬≥‚Äãquestion_label, ‚Å¥‚Äãfeedback[39m
## [38;5;246m# ‚Ñπ Use `colnames()` to see all variable names[39m</code></pre>
</div>
<div id="journal-de-nettoyage-des-autres" class="section level2">
<h2>Journal de nettoyage des ‚Äúautres‚Äù</h2>
<p>Cette fonction n√©cessite que la question Kobo avec la r√©ponse ‚Äúautre‚Äù
soit d√©finie comme ‚Äúvariable‚Äù pour la question parent et
‚Äúautre_variable‚Äù pour la question parent. ‚Äúautre_‚Äù peut √™tre diff√©rent
selon les outils et est d√©fini dans la question suivante par l‚Äôargument
‚Äúautre‚Äù, qui est la cha√Æne de caract√®res de chaque d√©but de variable
autre cod√©e dans Kobo. Dans l‚Äôexemple qui suit, il s‚Äôagit de
‚Äúautre_‚Äù.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtenir les autres </span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>other_cols <span class="ot">&lt;-</span> <span class="fu">other_cols</span>(data, <span class="st">&quot;autre_&quot;</span>, <span class="at">id_col =</span> uuid)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>other_cols</span></code></pre></div>
<pre><code>## [38;5;246m# A tibble: 2 √ó 4[39m
##   uuid  question_name             old_value                 other_parent_quest‚Ä¶¬π
##   [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m                     [3m[38;5;246m&lt;chr&gt;[39m[23m                     [3m[38;5;246m&lt;chr&gt;[39m[23m               
## [38;5;250m1[39m x5    autre_h_3_type_latrine    Aussi latrines communales h_3_type_latrine    
## [38;5;250m2[39m x7    autre_r_besoin_assistance Un m√©tier                 r_besoin_assistance 
## [38;5;246m# ‚Ä¶ with abbreviated variable name ¬π‚Äãother_parent_question[39m</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Obtenir les autres parents</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">other_parent_cols</span>(data, other_cols, <span class="st">&quot;autre_&quot;</span>, <span class="at">id_col =</span> uuid)</span></code></pre></div>
<pre><code>## [38;5;246m# A tibble: 2 √ó 3[39m
##   uuid  other_parent_question other_old_value            
##   [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m                 [3m[38;5;246m&lt;chr&gt;[39m[23m                      
## [38;5;250m1[39m x5    h_3_type_latrine      latrine_prive_partage autre
## [38;5;250m2[39m x7    r_besoin_assistance   abri_bna secal autre</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Fabriquer le journal de nettoyage des &quot;autres&quot;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>log_others <span class="ot">&lt;-</span> <span class="fu">make_log_other</span>(data, survey, <span class="st">&quot;autre_&quot;</span>, uuid, today, i_enum_id, i_zad) </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>log_others</span></code></pre></div>
<pre><code>## [38;5;246m# A tibble: 2 √ó 17[39m
##   id_check today               i_enu‚Ä¶¬π i_zad uuid  quest‚Ä¶¬≤ quest‚Ä¶¬≥ why   feedb‚Ä¶‚Å¥
##   [3m[38;5;246m&lt;chr&gt;[39m[23m    [3m[38;5;246m&lt;dttm&gt;[39m[23m                [3m[38;5;246m&lt;dbl&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m   [3m[38;5;246m&lt;chr&gt;[39m[23m   [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m  
## [38;5;250m1[39m autre_   2021-10-20 [38;5;246m00:00:00[39m       3 wend‚Ä¶ x5    autre_‚Ä¶ Lesque‚Ä¶ Othe‚Ä¶ Fill in
## [38;5;250m2[39m autre_   2021-10-20 [38;5;246m00:00:00[39m      12 wend‚Ä¶ x7    autre_‚Ä¶ De que‚Ä¶ Othe‚Ä¶ Fill in
## [38;5;246m# ‚Ä¶ with 8 more variables: action &lt;chr&gt;, old_value &lt;chr&gt;, new_value &lt;chr&gt;,[39m
## [38;5;246m#   type &lt;chr&gt;, other_parent_question &lt;chr&gt;, other_old_value &lt;chr&gt;,[39m
## [38;5;246m#   other_new_value &lt;chr&gt;, checkdate &lt;chr&gt;, and abbreviated variable names[39m
## [38;5;246m#   ¬π‚Äãi_enum_id, ¬≤‚Äãquestion_name, ¬≥‚Äãquestion_label, ‚Å¥‚Äãfeedback[39m
## [38;5;246m# ‚Ñπ Use `colnames()` to see all variable names[39m</code></pre>
</div>
<div id="journal-de-nettoyage-bas√©-sur-une-liste-de-v√©rifications"
class="section level2">
<h2>Journal de nettoyage bas√© sur une liste de v√©rifications</h2>
<p>Il suffit d‚Äôavoir produit en amont un fichier Excel de v√©rification
logique, qu‚Äôil est par ailleurs possible de modifier au cours de la
collecte.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(check_list)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>check_list <span class="ot">&lt;-</span> check_list <span class="sc">|&gt;</span> tibble<span class="sc">::</span><span class="fu">as_tibble</span>()</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>check_list</span></code></pre></div>
<pre><code>## [38;5;246m# A tibble: 5 √ó 7[39m
##   id_check question_name     why                    logic‚Ä¶¬π new_v‚Ä¶¬≤ action type 
##   [3m[38;5;246m&lt;chr&gt;[39m[23m    [3m[38;5;246m&lt;chr&gt;[39m[23m             [3m[38;5;246m&lt;chr&gt;[39m[23m                  [3m[38;5;246m&lt;chr&gt;[39m[23m   [3m[38;5;246m&lt;lgl&gt;[39m[23m   [3m[38;5;246m&lt;chr&gt;[39m[23m  [3m[38;5;246m&lt;chr&gt;[39m[23m
## [38;5;250m1[39m id1      i_consensus       Pas de consentement p‚Ä¶ [38;5;246m&quot;[39mi_con‚Ä¶ [31mNA[39m      remove char‚Ä¶
## [38;5;250m2[39m id2      survey_duration   Dur√©e d&#39;enqu√™te de mo‚Ä¶ [38;5;246m&quot;[39msurve‚Ä¶ [31mNA[39m      urgen‚Ä¶ doub‚Ä¶
## [38;5;250m3[39m id3      survey_duration   Dur√©e d&#39;enqu√™te de pl‚Ä¶ [38;5;246m&quot;[39msurve‚Ä¶ [31mNA[39m      check  doub‚Ä¶
## [38;5;250m4[39m id4      survey_duration   Dur√©e d&#39;enqu√™te de pl‚Ä¶ [38;5;246m&quot;[39msurve‚Ä¶ [31mNA[39m      urgen‚Ä¶ doub‚Ä¶
## [38;5;250m5[39m id5      c_chef_menage_age Le ou la cheffe de m√©‚Ä¶ [38;5;246m&quot;[39mc_che‚Ä¶ [31mNA[39m      check  doub‚Ä¶
## [38;5;246m# ‚Ä¶ with abbreviated variable names ¬π‚Äãlogical_test, ¬≤‚Äãnew_value[39m</code></pre>
<p>Le tableur excel de v√©rifications doit suivre quelques r√®gles pour
pouvoir √™tre lu par les fonctions d‚ÄôimpactR [ajouter la liste]. Par
exemple, il est n√©cessaire que toutes les variables pr√©sentes dans les
tests logiques (colonne ‚Äòlogical_test‚Äô du tableau de v√©rifications)
existent aussi dans les donn√©es, objet <code>data</code>. Pour cela, on
peut utiliser la fonction <code>check_check_list</code>, qui vise √†
valider ou non un tableur de v√©rifications logiques [note : elle n‚Äôest
pas encore robuste, mais elle permet d√©j√† de faire un certain nombre de
contr√¥les].</p>
<p>Par exemple, ci-dessous la colonne <code>survey_duration</code>
n‚Äôexiste pas dans les donn√©es <code>data</code>. Pourtant, il y a des
v√©rifications logiques qui la prennent en compte dans le tableur de
v√©rifications logiques <code>check_list</code>. Si on lance la commande
suivante, on obtiendrait une erreur :</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">check_check_list</span>(check_list, data)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co"># following column/s from `question_name` is/are missing in `.tbl`: survey_duration, survey_duration, survey_duration</span></span></code></pre></div>
<p>On va donc jouter la colonne de dur√©e d‚Äôenqu√™te √† l‚Äôaide de la
fonction <code>survey_duration</code>. On en profite pour assi ajouter
la diff√©rence de temps entre deux enqu√™tes par enqu√™teur.rice :</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">survey_duration</span>(start, end, <span class="at">new_colname =</span> <span class="st">&quot;survey_duration&quot;</span>) <span class="co">#|&gt;</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># NOT RUN!</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># survey_difftime(start, end, new_colname = &quot;survey_difftime&quot;, i_enum_id)</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>data<span class="sc">$</span>survey_duration</span></code></pre></div>
<pre><code>## [1] 53 51 49 51 48 55 42 41</code></pre>
<p>On peut v√©rifier de nouveau le tableur de v√©rifications logiques
:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">check_check_list</span>(check_list, data)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Cette fois-ci, c‚Äôest bon, la fonction donne <code>TRUE</code>, on
peut donc proc√©der avec la production du log de nettoyage.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>log_check_list <span class="ot">&lt;-</span> <span class="fu">make_log_from_check_list</span>(data, survey, check_list, uuid, today, i_enum_id, i_zad)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>log_check_list</span></code></pre></div>
<pre><code>## [38;5;246m# A tibble: 11 √ó 17[39m
##    id_ch‚Ä¶¬π today               i_enu‚Ä¶¬≤ i_zad uuid  quest‚Ä¶¬≥ quest‚Ä¶‚Å¥ why   feedb‚Ä¶‚Åµ
##    [3m[38;5;246m&lt;chr&gt;[39m[23m   [3m[38;5;246m&lt;dttm&gt;[39m[23m                [3m[38;5;246m&lt;dbl&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m   [3m[38;5;246m&lt;chr&gt;[39m[23m   [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m  
## [38;5;250m 1[39m id1     2021-10-20 [38;5;246m00:00:00[39m      12 wend‚Ä¶ x7    i_cons‚Ä¶ [38;5;246m&quot;[39mBonjo‚Ä¶ Pas ‚Ä¶ Verifi‚Ä¶
## [38;5;250m 2[39m id1     2021-10-20 [38;5;246m00:00:00[39m      12 wend‚Ä¶ x8    i_cons‚Ä¶ [38;5;246m&quot;[39mBonjo‚Ä¶ Pas ‚Ä¶ Verifi‚Ä¶
## [38;5;250m 3[39m id3     2021-10-18 [38;5;246m00:00:00[39m       8 wend‚Ä¶ x1    survey‚Ä¶ [38;5;246m&quot;[39m[38;5;246m&quot;[39m      Dur√©‚Ä¶ Verifi‚Ä¶
## [38;5;250m 4[39m id3     2021-10-20 [38;5;246m00:00:00[39m       3 wend‚Ä¶ x2    survey‚Ä¶ [38;5;246m&quot;[39m[38;5;246m&quot;[39m      Dur√©‚Ä¶ Verifi‚Ä¶
## [38;5;250m 5[39m id3     2021-10-20 [38;5;246m00:00:00[39m       3 wend‚Ä¶ x3    survey‚Ä¶ [38;5;246m&quot;[39m[38;5;246m&quot;[39m      Dur√©‚Ä¶ Verifi‚Ä¶
## [38;5;250m 6[39m id3     2021-10-20 [38;5;246m00:00:00[39m       3 wend‚Ä¶ x4    survey‚Ä¶ [38;5;246m&quot;[39m[38;5;246m&quot;[39m      Dur√©‚Ä¶ Verifi‚Ä¶
## [38;5;250m 7[39m id3     2021-10-20 [38;5;246m00:00:00[39m       3 wend‚Ä¶ x5    survey‚Ä¶ [38;5;246m&quot;[39m[38;5;246m&quot;[39m      Dur√©‚Ä¶ Verifi‚Ä¶
## [38;5;250m 8[39m id3     2021-10-20 [38;5;246m00:00:00[39m       3 wend‚Ä¶ x6    survey‚Ä¶ [38;5;246m&quot;[39m[38;5;246m&quot;[39m      Dur√©‚Ä¶ Verifi‚Ä¶
## [38;5;250m 9[39m id3     2021-10-20 [38;5;246m00:00:00[39m      12 wend‚Ä¶ x7    survey‚Ä¶ [38;5;246m&quot;[39m[38;5;246m&quot;[39m      Dur√©‚Ä¶ Verifi‚Ä¶
## [38;5;250m10[39m id3     2021-10-20 [38;5;246m00:00:00[39m      12 wend‚Ä¶ x8    survey‚Ä¶ [38;5;246m&quot;[39m[38;5;246m&quot;[39m      Dur√©‚Ä¶ Verifi‚Ä¶
## [38;5;250m11[39m id5     2021-10-20 [38;5;246m00:00:00[39m       3 wend‚Ä¶ x2    c_chef‚Ä¶ [38;5;246m&quot;[39mAge e‚Ä¶ Le o‚Ä¶ Verifi‚Ä¶
## [38;5;246m# ‚Ä¶ with 8 more variables: action &lt;chr&gt;, old_value &lt;chr&gt;, new_value &lt;lgl&gt;,[39m
## [38;5;246m#   type &lt;chr&gt;, other_parent_question &lt;chr&gt;, other_old_value &lt;chr&gt;,[39m
## [38;5;246m#   other_new_value &lt;chr&gt;, checkdate &lt;chr&gt;, and abbreviated variable names[39m
## [38;5;246m#   ¬π‚Äãid_check, ¬≤‚Äãi_enum_id, ¬≥‚Äãquestion_name, ‚Å¥‚Äãquestion_label, ‚Åµ‚Äãfeedback[39m
## [38;5;246m# ‚Ñπ Use `colnames()` to see all variable names[39m</code></pre>
</div>
<div id="journal-de-nettoyage-complet-et-exportation"
class="section level2">
<h2>Journal de nettoyage complet et exportation</h2>
<p>Pour terminer, il nous suffit de combiner tous ces journaux de
nettoyage en un seul. On peut ensuite l‚Äôexporter en fichier excel.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>log <span class="ot">&lt;-</span> <span class="fu">list</span>(log_outliers, log_check_list, log_others) <span class="sc">|&gt;</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="sc">~</span> .x <span class="sc">|&gt;</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(dplyr<span class="sc">::</span><span class="fu">across</span>(<span class="at">.fns =</span> as.character))) <span class="sc">|&gt;</span> </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">bind_rows</span>() <span class="sc">|&gt;</span> </span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  readr<span class="sc">::</span><span class="fu">type_convert</span>()</span></code></pre></div>
<p>Il est aussi possible d‚Äôutiliser la fonction
<code>make_all_logs</code> qui combine ces trois fonctions et ne sort
qu‚Äôun unique journal de nettoyage.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>log <span class="ot">&lt;-</span> <span class="fu">make_all_logs</span>(data, survey, check_list, <span class="st">&quot;autre_&quot;</span>, uuid, today, i_enum_id, i_zad)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>log</span></code></pre></div>
<pre><code>## [38;5;246m# A tibble: 17 √ó 17[39m
##    id_check today      i_enum‚Ä¶¬π i_zad uuid  quest‚Ä¶¬≤ quest‚Ä¶¬≥ why   feedb‚Ä¶‚Å¥ action
##    [3m[38;5;246m&lt;chr&gt;[39m[23m    [3m[38;5;246m&lt;date&gt;[39m[23m        [3m[38;5;246m&lt;dbl&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m   [3m[38;5;246m&lt;chr&gt;[39m[23m   [3m[38;5;246m&lt;chr&gt;[39m[23m [3m[38;5;246m&lt;chr&gt;[39m[23m   [3m[38;5;246m&lt;chr&gt;[39m[23m 
## [38;5;250m 1[39m id1      2021-10-20       12 wend‚Ä¶ x7    i_cons‚Ä¶ Bonjou‚Ä¶ Pas ‚Ä¶ Verifi‚Ä¶ remove
## [38;5;250m 2[39m id1      2021-10-20       12 wend‚Ä¶ x8    i_cons‚Ä¶ Bonjou‚Ä¶ Pas ‚Ä¶ Verifi‚Ä¶ remove
## [38;5;250m 3[39m id3      2021-10-18        8 wend‚Ä¶ x1    survey‚Ä¶ [31mNA[39m      Dur√©‚Ä¶ Verifi‚Ä¶ check 
## [38;5;250m 4[39m id3      2021-10-20        3 wend‚Ä¶ x2    survey‚Ä¶ [31mNA[39m      Dur√©‚Ä¶ Verifi‚Ä¶ check 
## [38;5;250m 5[39m id3      2021-10-20        3 wend‚Ä¶ x3    survey‚Ä¶ [31mNA[39m      Dur√©‚Ä¶ Verifi‚Ä¶ check 
## [38;5;250m 6[39m id3      2021-10-20        3 wend‚Ä¶ x4    survey‚Ä¶ [31mNA[39m      Dur√©‚Ä¶ Verifi‚Ä¶ check 
## [38;5;250m 7[39m id3      2021-10-20        3 wend‚Ä¶ x5    survey‚Ä¶ [31mNA[39m      Dur√©‚Ä¶ Verifi‚Ä¶ check 
## [38;5;250m 8[39m id3      2021-10-20        3 wend‚Ä¶ x6    survey‚Ä¶ [31mNA[39m      Dur√©‚Ä¶ Verifi‚Ä¶ check 
## [38;5;250m 9[39m id3      2021-10-20       12 wend‚Ä¶ x7    survey‚Ä¶ [31mNA[39m      Dur√©‚Ä¶ Verifi‚Ä¶ check 
## [38;5;250m10[39m id3      2021-10-20       12 wend‚Ä¶ x8    survey‚Ä¶ [31mNA[39m      Dur√©‚Ä¶ Verifi‚Ä¶ check 
## [38;5;250m11[39m id5      2021-10-20        3 wend‚Ä¶ x2    c_chef‚Ä¶ Age ex‚Ä¶ Le o‚Ä¶ Verifi‚Ä¶ check 
## [38;5;250m12[39m autre_   2021-10-20        3 wend‚Ä¶ x5    autre_‚Ä¶ Lesque‚Ä¶ Othe‚Ä¶ Fill in check 
## [38;5;250m13[39m autre_   2021-10-20       12 wend‚Ä¶ x7    autre_‚Ä¶ De que‚Ä¶ Othe‚Ä¶ Fill in check 
## [38;5;250m14[39m outlier  2021-10-20        3 wend‚Ä¶ x2    i_enqu‚Ä¶ Quel e‚Ä¶ Outl‚Ä¶ Fill in check 
## [38;5;250m15[39m outlier  2021-10-18        8 wend‚Ä¶ x1    c_n_ch‚Ä¶ Quel e‚Ä¶ Outl‚Ä¶ Fill in check 
## [38;5;250m16[39m outlier  2021-10-20        3 wend‚Ä¶ x2    c_n_ch‚Ä¶ Quel e‚Ä¶ Outl‚Ä¶ Fill in check 
## [38;5;250m17[39m outlier  2021-10-18        8 wend‚Ä¶ x1    c_chef‚Ä¶ Age ex‚Ä¶ Outl‚Ä¶ Fill in check 
## [38;5;246m# ‚Ä¶ with 7 more variables: old_value &lt;chr&gt;, new_value &lt;chr&gt;, type &lt;chr&gt;,[39m
## [38;5;246m#   other_parent_question &lt;chr&gt;, other_old_value &lt;chr&gt;, other_new_value &lt;lgl&gt;,[39m
## [38;5;246m#   checkdate &lt;chr&gt;, and abbreviated variable names ¬π‚Äãi_enum_id, ¬≤‚Äãquestion_name,[39m
## [38;5;246m#   ¬≥‚Äãquestion_label, ‚Å¥‚Äãfeedback[39m
## [38;5;246m# ‚Ñπ Use `colnames()` to see all variable names[39m</code></pre>
<p>Enfin, il existe plusieurs mani√®re d‚Äôexporter. Ici on donne l‚Äôexemple
avec le package <code>writexl</code>:</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Not run! La plus simple</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co"># writexl::write_xlsx(log, &quot;output/log.xlsx)</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co"># On peut y ajouter la date du jour pour permettre le suivi</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a><span class="co"># writexl::write_xlsx(log, paste0(&quot;output/log_&quot;, Sys.Date(), &quot;.xlsx))</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>



    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Noblet Guillaume.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>
